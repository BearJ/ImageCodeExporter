{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resources/webview.js"],"names":["selectScale","document","getElementById","selectFormat","selectUse","imgPreview","loading","copyBtn","closeBtn","scale","format","usage","layerInfo","codeMap","onchange","value","console","log","style","width","changeScale","disabled","changeCode","addEventListener","copy","close","text","changeConfig","window","postMessage","getPngBackground","data","code","height","bitmap","replace","getSvgBackground","build","buildSvgDataURI","svgXml","getSvgMask","getPngMask","actions","svgContent","sendCode","display","src","imgSrc","innerHtmlImg","innerHtmlSvg","pngBg","svgBg","svgMask","pngMask","sendConfig"],"mappings":"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","file":"webview.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./resources/webview.js\");\n","// disable the context menu (eg. the right click menu) to have a more native feel\nconst selectScale = document.getElementById('selectScale');\nconst selectFormat = document.getElementById('selectFormat');\nconst selectUse = document.getElementById('selectUse');\nconst imgPreview = document.getElementById('imgPreview');\nconst loading = document.getElementById('loading');\nconst copyBtn = document.getElementById('copyBtn');\nconst closeBtn = document.getElementById('closeBtn');\nlet scale = '2',\n  format = 'png',\n  usage = 'bg',\n  layerInfo = {},\n  codeMap = {};\n\nselectScale.onchange = function () {\n  scale = selectScale.value;\n  console.log('selectScale:' + scale);\n  imgPreview.style.width = layerInfo.width + 'px';\n  changeScale();\n};\nselectFormat.onchange = function () {\n  format = selectFormat.value;\n  if (format === 'svg') {\n    selectScale.disabled = true;\n  } else {\n    selectScale.disabled = false;\n  }\n  changeCode();\n  console.log('selectFormat:' + format);\n};\nselectUse.onchange = function () {\n  usage = selectUse.value;\n  changeCode();\n};\ncopyBtn.addEventListener('click', copy);\ncloseBtn.addEventListener('click', close);\n\n\n\nfunction copy() {\n  let text = document.getElementById('code').value;\n  changeConfig();\n  window.postMessage('copy', text);\n}\n\nfunction close() {\n  window.postMessage('close');\n}\n\nfunction getPngBackground(data) {\n  let code = `display: inline-block;\n  vertical-align: middle;\n  width: ${data.width}px;\n  height: ${data.height}px;\n  background-size: cover;\n  background-image: url(\"data:image/png;base64,${data.bitmap}\");`;\n  return code.replace(/^ +/gm, '');\n}\n\nfunction getSvgBackground(data) {\n  let build = buildSvgDataURI(data.svgXml);\n  let code = `display: inline-block;\n  vertical-align: middle;\n  width: ${data.width}px;\n  height: ${data.height}px;\n  background-size: cover;\n  background-image: url(\"data:image/svg+xml,${build}\");`;\n  return code.replace(/^ +/gm, '');\n}\n\nfunction getSvgMask(data) {\n  let build = buildSvgDataURI(data.svgXml);\n  let code = `display: inline-block;\n  vertical-align: middle;\n  width: ${data.width}px;\n  height: ${data.height}px;\n  -webkit-mask: url(\"data:image/svg+xml,${build}\") no-repeat 50% 50%;\n  mask: url(\"data:image/svg+xml,${build}\") no-repeat 50% 50%;\n  -webkit-mask-size: cover;\n  mask-size: cover;\n  background-color: currentColor;`;\n  return code.replace(/^ +/gm, '');\n}\n\nfunction getPngMask(data){\n  let code = `display: inline-block;\n  vertical-align: middle;\n  width: ${data.width}px;\n  height: ${data.height}px;\n  -webkit-mask: url(\"data:image/png;base64,${data.bitmap}\") no-repeat 50% 50%;\n  mask: url(\"data:image/png;base64,${data.bitmap}\") no-repeat 50% 50%;\n  -webkit-mask-size: cover;\n  mask-size: cover;\n  background-color: currentColor;`;\n  return code.replace(/^ +/gm, '');\n}\n\nfunction changeScale() {\n  window.postMessage('generateCode', scale);\n}\n\nfunction changeConfig() {\n  window.postMessage('changeConfig', scale, format, usage);\n}\n\nconst actions = {\n\n}\nfunction changeCode() {\n  document.getElementById('code').value = codeMap[`${format}_${usage}`];\n}\n\n/**\n * Returns encoded string of svg file.\n * @method buildSvgDataURI\n * @param {String} data Contents of svg file.\n */\nfunction buildSvgDataURI(svgContent) {\n  return svgContent\n    .replace(/^<\\?xml.*?>/gim, '') // Xml declaration\n    .replace(/<\\!\\-\\-(.*(?=\\-\\->))\\-\\->/gim, '') // Comments\n    .replace(/[\\r\\n]/gim, '') // Line breaks\n    .replace(/(\\r\\n|\\n|\\r)$/, '') // New line end of file\n    .replace(/\\t/gim, ' ') // Tabs (replace with space)\n    .replace(/%/gim, '%25') // %\n    .replace(/</gim, '%3C') // <\n    .replace(/>/gim, '%3E') // >\n    .replace(/#/gim, '%23') // #\n    .replace(/\\\"/gim, \"'\"); // \"\n}\n\n\n// call the wevbiew from the plugin\nwindow.sendCode = data => {\n  loading.style.display = 'none';\n  layerInfo = data;\n  imgPreview.src = 'data:image/png;base64,' + data.bitmap;\n  layerInfo.imgSrc = 'data:image/png;base64,' + data.bitmap;\n  layerInfo.innerHtmlImg = `<img src=\"data:image/png;base64,${data.bitmap}\">`;\n  layerInfo.innerHtmlSvg = data.svgXml;\n  layerInfo.pngBg = getPngBackground(data);\n  layerInfo.svgBg = getSvgBackground(data);\n  layerInfo.svgMask = getSvgMask(data);\n  layerInfo.pngMask = getPngMask(data);\n  imgPreview.style.width = layerInfo.width + 'px';\n  codeMap = {\n    'svg_bg': layerInfo.svgBg,\n    'svg_innerHtml': layerInfo.innerHtmlSvg,\n    'svg_mask': layerInfo.svgMask,\n    'png_bg': layerInfo.pngBg,\n    'png_innerHtml': layerInfo.innerHtmlImg,\n    'png_mask': layerInfo.pngMask\n  }\n  changeCode();\n};\n\nwindow.sendConfig = data => {\n  selectScale.value = data.scale;\n  selectFormat.value = data.format;\n  selectUse.value = data.usage;\n  scale = data.scale;\n  format = data.format;\n  usage = data.usage;\n  if (format === 'svg') {\n    selectScale.disabled = true;\n  } else {\n    selectScale.disabled = false;\n  }\n  window.postMessage('generateCode', scale, format, usage);\n}\n"],"sourceRoot":""}